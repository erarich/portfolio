<main class="area-container">
  <div class="area-container__header">
    <h2>{{ areaType }}</h2>
    <p>{{ jsonData.length }} projects.</p>
    <mat-divider></mat-divider>
    <div class="area-container__filter">
      <div style="display: flex; flex-direction: row; gap: 20px">
        <mat-select [(value)]="sortSelect" placeholder="Sort">
          <mat-option *ngFor="let option of sort" [value]="option">{{
            option
          }}</mat-option>
        </mat-select>
        <mat-select
          [(value)]="languageSelect"
          (selectionChange)="onFilterChange()"
          placeholder="Language"
          multiple
        >
          <mat-option *ngFor="let option of language" [value]="option">{{
            option
          }}</mat-option>
        </mat-select>
        <mat-select
          [(value)]="frameworkSelect"
          placeholder="Framework"
          (selectionChange)="onFilterChange()"
          multiple
        >
          <mat-option *ngFor="let option of framework" [value]="option">{{
            option
          }}</mat-option>
        </mat-select>
      </div>
      <div>
        <mat-select
          [(value)]="viewSelect"
          (selectionChange)="onViewSelectChange()"
          placeholder="View"
        >
          <mat-option *ngFor="let option of viewOptions" [value]="option">{{
            option
          }}</mat-option>
        </mat-select>
      </div>
    </div>
  </div>

  <section class="area-list" *ngIf="listView">
    <div
      [routerLink]="['/project', project.id]"
      class="area-list__item"
      *ngFor="let project of jsonData"
    >
      <div class="area-list__item-image-container">
        <img [src]="project.image" alt="Project Image" />
      </div>
      <div class="area-list__item-container">
        <div class="area-list__item-info">
          <div style="display: flex; flex-direction: column">
            <h3>{{ project.title }}</h3>
            <div>
              <ul>
                <li *ngFor="let technology of project.technologies">
                  {{ technology }}
                </li>
              </ul>
            </div>
          </div>
          <div>
            <p style="font-color: lightgray; font-size: 10px">
              <span style="font-weight: bold; font-size: 12px"
                >Created at:</span
              >
              {{ project.created_at }}
            </p>
            <p style="font-color: lightgray; font-size: 10px">
              <span style="font-weight: bold; font-size: 12px"
                >Last commit:</span
              >
              {{ project.created_at }}
            </p>
          </div>
        </div>
        <div class="area-list__item-buttons">
          <button
            mat-fab
            extended
            (click)="redirectToGitHub(project.github)"
            color="primary"
          >
            <mat-icon>code</mat-icon>
            GitHub
          </button>
          <button
            mat-fab
            extended
            (click)="redirectToDemo(project.demo)"
            color="primary"
          >
            <mat-icon>link</mat-icon>
            Demo
          </button>
        </div>
      </div>
    </div>
  </section>

  <section class="area-table" *ngIf="tableView">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <!-- Define your columns based on the structure of your jsonData -->

      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let element">{{ element.title }}</td>
      </ng-container>

      <ng-container matColumnDef="technologies">
        <th mat-header-cell *matHeaderCellDef>Technologies</th>
        <td mat-cell *matCellDef="let element">
          <ul style="padding: 10px">
            <li *ngFor="let technology of element.technologies">
              {{ technology }}
            </li>
          </ul>
        </td>
      </ng-container>

      <ng-container matColumnDef="created_at">
        <th mat-header-cell *matHeaderCellDef>Created At</th>
        <td mat-cell *matCellDef="let element">{{ element.created_at }}</td>
      </ng-container>

      <ng-container matColumnDef="last_commit">
        <th mat-header-cell *matHeaderCellDef>Last Commit</th>
        <td mat-cell *matCellDef="let element">{{ element.last_commit }}</td>
      </ng-container>

      <ng-container matColumnDef="github">
        <th mat-header-cell *matHeaderCellDef>GitHub</th>
        <td mat-cell *matCellDef="let element">
          <button mat-icon-button (click)="redirectToGitHub(element.github)">
            <mat-icon>code</mat-icon>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="demo">
        <th mat-header-cell *matHeaderCellDef>Demo</th>
        <td mat-cell *matCellDef="let element">
          <button mat-icon-button (click)="redirectToDemo(element.demo)">
            <mat-icon>link</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Add more columns as needed -->

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        [routerLink]="['/project', row.id]"
      ></tr>
    </table>
  </section>

  <section class="area-grid" *ngIf="gridView">
    <div
      *ngFor="let project of jsonData"
      [routerLink]="['/project', project.id]"
    >
      <div class="area-grid__item">
        <div class="area-grid__item-image-container">
          <img [src]="project.image" alt="Project Image" />
        </div>
        <div class="area-grid__item-container">
          <div class="area-grid__item-info">
            <div style="display: flex; flex-direction: column">
              <h3>{{ project.title }}</h3>
              <div
                style="
                  display: flex;
                  flex-wrap: wrap;
                  align-content: center;
                  text-align: center;
                  justify-content: center;
                "
              >
                <p
                  style="margin-right: 10px; font-size: 12px"
                  *ngFor="let technology of project.technologies"
                >
                  {{ technology }}
                </p>
              </div>
            </div>
            <div
              style="
                display: flex;
                flex-direction: row;
                gap: 20px;
                align-content: center;
                justify-content: space-between;
                padding: 5px;
              "
            >
              <p style="font-color: lightgray; font-size: 8px">
                <span style="font-weight: bold; font-size: 10px"
                  >Created at:</span
                >
                {{ project.created_at }}
              </p>
              <p style="font-color: lightgray; font-size: 8px">
                <span style="font-weight: bold; font-size: 10px"
                  >Last commit:</span
                >
                {{ project.last_commit }}
              </p>
            </div>
          </div>
          <div class="area-grid__item-buttons">
            <button
              mat-fab
              extended
              (click)="redirectToGitHub(project.github)"
              color="primary"
            >
              <mat-icon>code</mat-icon>
              GitHub
            </button>
            <button
              mat-fab
              extended
              (click)="redirectToDemo(project.demo)"
              color="primary"
            >
              <mat-icon>link</mat-icon>
              Demo
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
